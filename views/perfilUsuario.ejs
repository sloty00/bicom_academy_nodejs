<!DOCTYPE html>
<html lang="en">

<%- include('templates/header')%>

<body id="page-top">
    <!-- Page Wrapper -->
    <header>
        <!-- NavBar -->
        <nav class="navbar navbar-dark bg-primary">
            <a class="navbar-brand" href="#" style="padding-left:0.5em">
                <img src="img_bicom/planillas/64x64.jpg" width="50" height="50" alt="">
            </a>
            <h3 style="padding-right:31.5em; color: white;">Perfil de Usuario</h3>
        </nav>
    </header>
    <div id="wrapper">
        <%- include('templates/siderbars') %>

        <!-- Content Wrapper -->
        <div id="content-wrapper" class="d-flex flex-column">

            <!-- Main Content -->
            <div id="content">
                <main class="container" role="main">
                    <div class="bg-light p-5 rounded">
                      <nav aria-label="breadcrumb active">
                        <ol class="breadcrumb">
                          <li class="breadcrumb-item" aria-current="page"><a href="/">Inicio</a></li>
                        </ol>
                      </nav>
                    </div>
                    <div class="d-flex justify-content-end" style="padding-right: 3em;">
                    <div class="btn-group">
                        <button type="button" class="btn btn-secondary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                          Ir a...
                        </button>
                        <div class="dropdown-menu">
                          <a class="dropdown-item" href="#visionPerfil">Vista Perfil</a>
                          <a class="dropdown-item" href="#formularioPerfil">Completa tu Perfil</a>
                        </div>
                    </div>
                    </div>
                    <!-- Begin Page Content -->
                    <div class="container-fluid">
                        <!-- /.container-fluid -->
                        <div class="row" id="visionPerfil">
                            <div class="card-header py-3">
                                <h6 class="m-0 font-weight-bold text-primary">Vista de perfil</h6>
                            </div>
                            <div class="col-sm" align="center" style="margin-top: 1em;">
                                <img src="img/usuario.png" width="300" height="300" alt="">
                            </div>
                            <% if(!perfilPer.p_rut ) { %>
                              <% var disabled1 = "" %>
                              <% var hidden1 = "hidden" %>
                            <% } else { %>
                              <% var disabled1 = "disabled" %>
                              <% var hidden1 = "" %>
                            <% } %> 
                            <div class="col-sm" style="margin-top: 2em;">
                              <h5>Detalles</h5>
                              <div class="card-body">
                                  <p for="idUsuario" class="light">Id de Usuario: <%= perfilUs.a_id %></p>
                                  <p for="idUsername">Nombre de usuario: <%= perfilUs.a_cuenta %></p>
                                  <p for="idRut" <%= hidden1 %>>Rut: <%= perfilPer.p_rut %> </p>
                                  <p for="idNombre" <%= hidden1 %>>Nombre: <%= perfilPer.p_nombre %></p>
                                  <p for="idApellido" <%= hidden1 %>>Apellido: <%= perfilPer.p_apellidos %></p>
                                  <p for="idComuna" <%= hidden1 %>>Comuna: <%= perfilPer.fk_comuna %></p>
                                  <p for="idDireccion" <%= hidden1 %>>Direccion: <%= perfilPer.p_direccion %></p>
                                  <p for="idTelefono" <%= hidden1 %>>Telefono: <%= perfilPer.p_telefono %></p>
                                  <p for="idEmail" <%= hidden1 %>>Email: <%= perfilPer.p_email %></p>
                              </div>
                            </div>
                        </div>
                        <div class="row" id="formularioPerfil">
                            <div class="card-header py-3">
                                <h6 class="m-0 font-weight-bold text-primary">Completa tu perfil</h6>
                            </div>
                            <div style="padding-top: 1em; padding-left: 2em;">
                                <form class="row g-3 needs-validation" action="/perfilUsuario" method="POST" novalidate>
                                    <div class="form-row">
                                      <div class="form-group col-md-6">
                                        <label for="inputRut" class="form-label">Rut</label>
                                        <input type="text" class="form-control" id="inputRut" name="inputRut" placeholder="Rut" required <%= disabled1 %>>
                                      </div>
                                      <div class="form-group col-md-6">
                                        <label for="inputNombre">Nombre</label>
                                        <input type="text" class="form-control" id="inputNombre" name="inputNombre" placeholder="Nombre" required <%= disabled1 %>>
                                      </div>
                                    </div>
                                    <div class="form-group">
                                      <label for="inputApellido">Apellido</label>
                                      <input type="text" class="form-control" id="inputApellido" name="inputApellido" placeholder="Apellido" required <%= disabled1 %>>
                                    </div>
                                    <div class="form-group">
                                        <label for="inputDireccion">Direccion</label>
                                        <input type="text" class="form-control" id="inputDireccion" name="inputDireccion" placeholder="Direccion" required <%= disabled1 %>>
                                    </div>
                                    <div class="form-row">
                                        <div class="form-group col-md-4">
                                          <label for="inputState">Comuna</label>
                                            <select id="inputComuna" name="inputComuna" class="form-control" <%= disabled1 %>>
                                              <option selected>Elegir...</option>
                                              <% comuna.forEach((comunas)=>{ %>
                                                <option value="<%= comunas.c_cut %>"><%= comunas.c_descripcion %></option>
                                              <%})%>
                                            </select>
                                        </div>
                                        <div class="form-group col-md-4">
                                            <label for="inputFono">Telefono</label>
                                            <input type="text" class="form-control" id="inputFono" name="inputFono" placeholder="+56 9 89561287" required <%= disabled1 %>>
                                          </div>
                                      <div class="form-group col-md-4">
                                        <label for="inputEmail">Email</label>
                                        <input type="email" class="form-control" id="inputEmail" name="inputEmail" placeholder="Usuario@servidor.com" required <%= disabled1 %>>
                                      </div>
                                    </div>
                                    <div class="form-check form-group">
                                        <input class="form-check-input" type="checkbox" value="" id="invalidCheck" required <%= disabled1 %>>
                                        <label class="form-check-label" for="invalidCheck">
                                          No soy robot
                                        </label>
                                        <div class="invalid-feedback">
                                          Click antes de Guardar.
                                        </div>
                                      </div>
                                    <button type="submit" class="btn btn-primary" <%= disabled1 %>>Guardar Datos</button>
                                  </form>
                                </div>
                        </div>
                    </div>
                </main>

            </div>
            <!-- End of Main Content -->

            <!-- Footer -->
            <%- include('templates/footer') %>
            <!-- End of Footer -->
        </div>
    </div>
    <!-- End of Content Wrapper -->

    <!-- Scroll to Top Button-->
    <a class="scroll-to-top rounded" href="#page-top">
        <i class="fas fa-angle-up"></i>
    </a>

    <!-- Bootstrap core JavaScript-->
    <script src="/assets/vendor/jquery/jquery.min.js"></script>
    <script src="/assets/vendor/bootstrap/js/bootstrap.bundle.js"></script>
    <!-- JavaScript Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2" crossorigin="anonymous"></script>

    <!-- Core plugin JavaScript-->
    <script src="/assets/vendor/jquery-easing/jquery.easing.min.js"></script>

    <!-- Custom scripts for all pages-->
    <script src="/assets/js/sb-admin-2.min.js"></script>

    <!-- Page level plugins -->
    <script src="/assets/vendor/chart.js/Chart.min.js"></script>

    <!-- Page level custom scripts -->
    <script src="/assets/js/demo/chart-area-demo.js"></script>
    <script src="/assets/js/demo/chart-pie-demo.js"></script>
    <script src="/assets/js/demo/datatables-demo.js"></script>
    <script src="/assets/vendor/datatables/jquery.dataTables.min.js"></script>
    <script src="/assets/vendor/datatables/dataTables.bootstrap4.min.js"></script>
    <script src="/js/youtube.js"></script>
    <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.3/moment.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.3/moment-with-locales.min.js"></script>
    <script>
        // Example starter JavaScript for disabling form submissions if there are invalid fields
        (function () {
        'use strict'

        // Fetch all the forms we want to apply custom Bootstrap validation styles to
        var forms = document.querySelectorAll('.needs-validation')

        // Loop over them and prevent submission
        Array.prototype.slice.call(forms)
            .forEach(function (form) {
            form.addEventListener('submit', function (event) {
                if (!form.checkValidity()) {
                event.preventDefault()
                event.stopPropagation()
                }

                form.classList.add('was-validated')
            }, false)
            })
        })()
    </script>
</body>
</html>